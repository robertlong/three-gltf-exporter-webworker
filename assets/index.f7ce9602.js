const p=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};p();const h="modulepreload",c={},m="/three-gltf-exporter-webworker/",w=function(t,r){return!r||r.length===0?t():Promise.all(r.map(e=>{if(e=`${m}${e}`,e in c)return;c[e]=!0;const n=e.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const i=document.createElement("link");if(i.rel=n?"stylesheet":h,n||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),n)return new Promise((u,f)=>{i.addEventListener("load",u),i.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>t())};function l(s){const t=document.createElement("div");t.classList.add("info");const r=document.createElement("span");r.innerText=s,t.appendChild(r);const e=document.createElement("button");return e.innerText="Export glTF",t.appendChild(e),document.body.appendChild(t),e}function d(s,t){const r=new Blob([s],{type:"application/octet-stream"}),e=document.createElement("a");e.style.display="none",document.body.appendChild(e),e.href=URL.createObjectURL(r),e.download=t,e.click(),document.body.removeChild(e)}const a=document.getElementById("canvas");if(typeof OffscreenCanvas!="undefined"){const s=l("Using WebWorker + OffscreenCanvas"),t=a.transferControlToOffscreen(),r=new Worker("/three-gltf-exporter-webworker/assets/worker.5096955d.js",{type:"module"});r.postMessage({type:"start",canvas:t,width:window.innerWidth,height:window.innerHeight},[t]),window.addEventListener("resize",()=>{r.postMessage({type:"resize",pixelRatio:devicePixelRatio,width:window.innerWidth,height:window.innerHeight})}),s.addEventListener("click",()=>{r.postMessage({type:"export"})}),r.addEventListener("message",({data:e})=>{e.type==="result"&&d(e.buffer,"scene.glb")})}else{const s=l("OffscreenCanvas Unsupported");w(()=>import("./renderer.ca965d25.js"),[]).then(t=>{t.start(a,devicePixelRatio,window.innerWidth,window.innerHeight),window.addEventListener("resize",()=>{t.resize(window.innerWidth,window.innerHeight)}),s.addEventListener("click",()=>{t.exportGLTF().then(r=>{d(r,"scene.glb")})})}).catch(t=>{console.error(t)})}
